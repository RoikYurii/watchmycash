<?php
  require_once 'php/config.php';
  require_once 'php/functions.php';
  // require_once 'php/session.php';

  // if(!isset($_SESSION['login_user'])){
  //    header("location:login.php");
  // }
  $history = get_history($db);
?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Watch My Cash</title>
    <link href="https://fonts.googleapis.com/css?family=Exo+2:400,500,600,700" rel="stylesheet">
    <link rel="stylesheet" href="css/normilize.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div class="preloader">
      <svg class="preloader__icon" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
      	 viewBox="0 0 331.493 331.493" style="enable-background:new 0 0 331.493 331.493;" xml:space="preserve">
        <g>
        	<g>
        		<path d="M298.761,57.093l-101.2-54.8c-9.6-5.2-22.8-1.2-28,8.4l-59.2,110h-72c-9.2,0-16.4,7.2-16.4,16.4v28.8v149.2
        			c0,9.2,7.2,16.4,16.4,16.4h230c9.2,0,16.4-7.2,16.4-16.4v-41.6h6.8c3.6,0,6.4-2.8,6.4-6.4v-47.6c0-3.6-2.8-6.4-6.4-6.4h-6.8v-46.8
        			c0-7.6-5.6-14.4-12.8-16l35.2-65.2C312.361,75.093,308.761,62.693,298.761,57.093z M226.761,32.693l-63.2,117.2h-18l67.6-124.4
        			L226.761,32.693z M181.161,16.693c2-3.6,6.8-5.2,10.4-3.2l10,5.6l-70.4,130.8h-22L181.161,16.693z M34.361,136.693
        			c0-1.2,1.6-3.2,3.6-3.2h65.2l-8.8,16h-56.4c-1.2,0-2.4,0-3.6,0.4V136.693z M271.561,315.093c0,2-1.6,3.6-3.6,3.6h-230
        			c-2,0-3.6-1.6-3.6-3.6v-148.8c0-2,1.6-3.6,3.6-3.6h60.4h25.6h46.8h90h6.8c2,0,3.6,1.6,3.6,3.6v46.8h-24.4v0
        			c-10.8,0-19.2,8.8-19.2,19.2v22c0,10.8,8.8,19.2,19.2,19.2h24.8V315.093z M284.361,225.893h0.4v34.8h-0.4h-37.6
        			c-3.6,0-6.4-2.8-6.4-6.4v-22c0-3.6,2.8-6.4,6.4-6.4H284.361z M295.561,78.693l-38.4,71.2h-79.2l60-110.8l54.4,29.6
        			C296.361,70.293,297.561,75.093,295.561,78.693z"/>
        	</g>
        </g>
        <g>
        	<g>
        		<path d="M271.161,72.693l-3.2-1.6c-8-4.4-18.8-1.2-23.2,6.8l-4,7.6c-2,4-2.8,8.8-1.2,13.2c1.2,4.4,4.4,8,8.4,10l3.2,1.6
        			c2.4,1.2,5.2,2,8,2c6.4,0,12-3.6,15.2-8.8l4-7.6C282.361,87.493,279.161,77.093,271.161,72.693z M266.761,89.893l-4,7.6
        			c-1.2,2-4,2.8-6,1.6l-3.2-2c-0.8-0.4-1.6-1.6-2-2.4c-0.4-1.2-0.4-2.4,0.4-3.2l4-7.6c0.8-1.2,2.4-2.4,4-2.4c0.8,0,1.2,0,2,0.4
        			l3.2,1.6C266.761,85.093,267.561,87.493,266.761,89.893z"/>
        	</g>
        </g>
      </svg>
    </div>
    <div class="wrapper">
      <div class="num-error">
        <div class="num-error__window">
          <p class="num-error__text">Потрібно ввести число</p>
          <div class="num-error__btn">ОK</div>
        </div>
      </div>
      <header class="header">
        <nav class="nav">
          <a href="#accounts" class="nav__item nav__item--active">
            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 viewBox="0 0 511.999 511.999" style="enable-background:new 0 0 511.999 511.999;" xml:space="preserve">
              <g>
              	<g>
              		<path d="M411.303,30.445h-79.87C327.425,13.03,311.808,0,293.196,0h-76.39c-18.613,0-34.23,13.03-38.237,30.445h-77.872
              			c-27.853,0-50.511,22.659-50.511,50.511v380.532c0,27.853,22.659,50.511,50.511,50.511h310.608
              			c27.853,0,50.511-22.659,50.511-50.511V80.956C461.815,53.103,439.156,30.445,411.303,30.445z M207.528,39.246
              			c0-5.116,4.162-9.279,9.278-9.279h76.39c5.115,0,9.278,4.162,9.278,9.279v18.357c0,5.116-4.162,9.279-9.278,9.279h-76.39
              			c-5.115,0-9.278-4.162-9.278-9.279V39.246z M411.304,482.032H100.696c-11.329,0-20.544-9.216-20.544-20.544V80.956
              			c0-11.329,9.216-20.544,20.544-20.544h76.976c1.446,20.333,18.44,36.438,39.133,36.438h76.39
              			c20.695,0,37.688-16.105,39.133-36.438h78.974c11.329,0,20.544,9.216,20.544,20.544v380.532h0.001
              			C431.848,472.817,422.632,482.032,411.304,482.032z"/>
              	</g>
              </g>
            <g>
            	<g>
            		<path d="M385.912,164.773H239.899c-8.275,0-14.984,6.709-14.984,14.984s6.709,14.984,14.984,14.984h146.012
            			c8.275,0,14.984-6.709,14.984-14.984S394.187,164.773,385.912,164.773z"/>
            	</g>
            </g>
            <g>
            	<g>
            		<path d="M196.075,143.083c-6.243-5.428-15.709-4.771-21.139,1.475l-33.454,38.471l-12.354-12.641
            			c-5.784-5.921-15.271-6.027-21.188-0.244c-5.92,5.784-6.027,15.269-0.244,21.188l23.712,24.265
            			c0.13,0.133,0.271,0.246,0.404,0.373c0.162,0.154,0.311,0.315,0.48,0.462c0.046,0.04,0.095,0.073,0.141,0.112
            			c0.16,0.136,0.327,0.26,0.49,0.389c0.219,0.171,0.438,0.341,0.663,0.497c0.179,0.125,0.363,0.24,0.545,0.356
            			c0.226,0.143,0.453,0.282,0.684,0.412c0.184,0.103,0.369,0.2,0.556,0.295c0.245,0.124,0.49,0.24,0.739,0.349
            			c0.181,0.079,0.362,0.157,0.545,0.229c0.266,0.104,0.534,0.198,0.804,0.286c0.174,0.057,0.347,0.115,0.522,0.166
            			c0.292,0.084,0.585,0.153,0.88,0.218c0.16,0.036,0.319,0.076,0.479,0.107c0.329,0.062,0.658,0.105,0.99,0.145
            			c0.132,0.016,0.263,0.04,0.395,0.052c0.462,0.043,0.926,0.068,1.389,0.068c0.001,0,0.002,0,0.003,0c0.001,0,0.002,0,0.004,0
            			c0.499,0,1-0.029,1.497-0.078c0.143-0.014,0.284-0.042,0.427-0.061c0.356-0.046,0.709-0.096,1.062-0.167
            			c0.174-0.035,0.346-0.083,0.518-0.125c0.315-0.076,0.629-0.155,0.94-0.251c0.189-0.059,0.374-0.127,0.56-0.193
            			c0.287-0.102,0.572-0.208,0.854-0.328c0.198-0.084,0.392-0.175,0.586-0.268c0.26-0.124,0.516-0.255,0.771-0.395
            			c0.204-0.112,0.404-0.229,0.603-0.351c0.234-0.144,0.464-0.296,0.69-0.453c0.203-0.141,0.405-0.283,0.601-0.434
            			c0.215-0.166,0.424-0.343,0.631-0.521c0.191-0.164,0.382-0.326,0.565-0.5c0.054-0.051,0.112-0.094,0.165-0.146
            			c0.166-0.163,0.311-0.338,0.468-0.505c0.12-0.129,0.251-0.244,0.368-0.378l44.118-50.735
            			C202.98,157.977,202.319,148.514,196.075,143.083z"/>
            	</g>
            </g>
            <g>
            	<g>
            		<path d="M385.912,269.14H239.899c-8.275,0-14.984,6.709-14.984,14.984c0,8.275,6.709,14.984,14.984,14.984h146.012
            			c8.275,0,14.984-6.709,14.984-14.984C400.896,275.848,394.187,269.14,385.912,269.14z"/>
            	</g>
            </g>
            <g>
            	<g>
            		<path d="M385.912,373.027H239.899c-8.275,0-14.984,6.709-14.984,14.984s6.709,14.984,14.984,14.984h146.012
            			c8.275,0,14.984-6.709,14.984-14.984S394.187,373.027,385.912,373.027z"/>
            	</g>
            </g>
            <g>
            	<g>
            		<path d="M181.936,269.14H120.94c-8.275,0-14.984,6.709-14.984,14.984c0,8.275,6.709,14.984,14.984,14.984h60.997
            			c8.275,0,14.984-6.709,14.984-14.984C196.92,275.848,190.211,269.14,181.936,269.14z"/>
            	</g>
            </g>
            <g>
            	<g>
            		<path d="M181.936,371.161H120.94c-8.275,0-14.984,6.709-14.984,14.984s6.709,14.984,14.984,14.984h60.997
            			c8.275,0,14.984-6.709,14.984-14.984S190.211,371.161,181.936,371.161z"/>
            	</g>
            </g>
            </svg>
          </a>
          <a href="#history" class="nav__item">
            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 viewBox="0 0 507.289 507.289" style="enable-background:new 0 0 507.289 507.289;" xml:space="preserve">
              <g>
              	<g>
              		<g>
              			<path d="M153.712,375.691l-24,21.248c7.642,8.598,15.944,16.585,24.832,23.888l20.288-24.8
              				C167.265,389.818,160.203,383.018,153.712,375.691z"/>
              			<path d="M122.176,326.187l-29.408,12.624c4.547,10.596,9.946,20.805,16.144,30.528l26.992-17.152
              				C130.64,343.901,126.049,335.207,122.176,326.187z"/>
              			<path d="M399.595,66.763c-32.9-19.075-70.253-29.126-108.283-29.136C183.147,37.801,91.764,117.904,77.424,225.115l-54.8-54.8
              				L0,192.939l91.312,91.312l91.312-91.312L160,170.315l-49.488,49.424c18.803-99.758,114.916-165.384,214.674-146.581
              				S490.57,188.074,471.767,287.831S356.851,453.216,257.093,434.412c-20.449-3.854-40.095-11.153-58.101-21.586l-16.08,27.664
              				c103.202,59.835,235.37,24.679,295.205-78.523C537.953,258.766,502.797,126.598,399.595,66.763z"/>
              			<polygon points="267.312,109.627 267.312,285.627 337.712,338.427 356.912,312.827 299.312,269.627 299.312,109.627 			"/>
              		</g>
              	</g>
              </g>
            </svg>
          </a>
        </nav>
      </header>
      <section class="section section--active accounts">
        <svg class="edit__btn" id="edit" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 490.3 490.3" style="enable-background:new 0 0 490.3 490.3;" xml:space="preserve" width="512px" height="512px">
          <g>
          	<g>
          		<path d="M303.75,304.1c-4.5,4.5-4.5,11.8,0,16.2l106.3,106.3l9.1-9.1l7.1-7.1l-106.2-106.3    C315.55,299.6,308.25,299.6,303.75,304.1z" fill="#FFFFFF"/>
          		<path d="M489.95,245.1v-22.9c0-8.5-6.2-15.9-14.6-17.3l-45.6-7.6c-4.5-17.5-11.4-34-20.4-49.3l26.8-37.7c4.9-7,4.1-16.5-1.9-22.5    l-16.1-16.1l-16.1-16.1c-6-6-15.5-6.8-22.5-1.8l-37.7,26.8c-15.3-9.1-31.8-15.8-49.3-20.4l-7.7-45.6c-1.4-8.5-8.7-14.6-17.3-14.6    h-22.9h-22.9c-8.2,0.4-15.5,6.6-16.9,14.9l-7.6,45.6c-17.5,4.5-34,11.4-49.3,20.4l-37.7-26.8c-7-4.9-16.5-4.1-22.5,1.9l-16,16.3    l-16.1,16.1c-6,6-6.8,15.5-1.8,22.5l26.8,37.7c-9.3,15.5-16.3,32.4-20.6,50.5l-45.1,7.7c-8.4,1.4-14.6,8.7-14.6,17.3V247v22.9    c0,8.5,6.2,15.9,14.6,17.3l46,7.8c4.5,17.5,11.8,34,20.6,49l-27,37.1c-4.9,7-4.1,16.5,1.9,22.5l16.1,16.1l16.1,16.1    c6,6,15.5,6.8,22.5,1.8l37.9-27c15.3,8.9,31.8,15.6,49.3,20l7.7,45.1c1.5,8.5,8.7,14.6,17.3,14.6h22.9h22.9    c8.5,0,15.9-6.2,17.3-14.6l7.8-46c4-1,7.9-2.2,11.7-3.5c1-0.3,2.1-0.7,3.1-1.1c3.2-1.1,6.3-2.3,9.4-3.6c0.7-0.3,1.4-0.6,2.1-0.9    c3.7-1.6,7.3-3.3,10.9-5.1c0.1-0.1,0.2-0.1,0.3-0.2c3.6-1.8,7.2-3.8,10.6-5.8c2.2-1.3,4.4-2.7,6.5-4.1l-58.8-58.8    c-10.5-10.5-25.1-15.6-40-14.6c-25.2,1.7-51-7-70.2-26.3c-23.3-23.3-31.2-56.3-23.7-86.2c0.5-2.2,3.3-2.9,4.8-1.3l36.7,36.7    c10.9,10.9,28.9,10.9,39.8-0.1l16.7-16.7c11-11,11-28.9,0.1-39.8l-38.6-38.6c-1.5-1.5-0.9-4.1,1.1-4.8c31.3-10,67-2.7,91.8,22.1    c20.2,20.2,28.8,47.6,25.9,74c-1.7,15.7,3.4,31.4,14.6,42.6l55.7,55.7c1.8-2.8,3.5-5.6,5.2-8.4c1.9-3.3,3.7-6.6,5.4-10    c0.5-1,1-2,1.5-3c1.1-2.3,2.1-4.6,3.2-7c0.8-1.8,1.6-3.7,2.3-5.5c0.5-1.2,0.9-2.5,1.4-3.8c1-2.6,1.9-5.2,2.8-7.9l0,0    c1.1-3.6,2.2-7.1,3.2-10.7l45.6-7.7c8.5-1.4,14.6-8.7,14.6-17.3L489.95,245.1z" fill="#FFFFFF"/>
          	</g>
          </g>
        </svg>
        <h3 class="title accounts__title">Рахунки</h3>
        <div class="accounts__container">
          <div class="accounts__inner">
            <?php
              $accounts = get_accounts($db);
              $cats = get_cats($db);
              foreach ( $accounts as $account ) {
                include 'php/account.php';
              }
            ?>
          </div>
        </div>
        <div class="add add_account" >
          <svg class="add__btn edit hidden" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          	 width="357px" height="357px" viewBox="0 0 357 357" style="enable-background:new 0 0 357 357;" xml:space="preserve">
            <g>
            	<g id="add">
            		<path d="M357,204H204v153h-51V204H0v-51h153V0h51v153h153V204z"/>
            	</g>
            </g>
          </svg>
      </div>
      </section>
      <section class="section history">
        <h3 class="title history__title">Історія</h3>
        <?php
          if ($history) {
            $class = "active";
          } else {
            $class = "";
          }
        ?>
        <svg id="clearHistory" class="history__del <?php echo $class ?>" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.9 21.9" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 21.9 21.9">
          <path fill="#f56391" d="M14.1,11.3c-0.2-0.2-0.2-0.5,0-0.7l7.5-7.5c0.2-0.2,0.3-0.5,0.3-0.7s-0.1-0.5-0.3-0.7l-1.4-1.4C20,0.1,19.7,0,19.5,0  c-0.3,0-0.5,0.1-0.7,0.3l-7.5,7.5c-0.2,0.2-0.5,0.2-0.7,0L3.1,0.3C2.9,0.1,2.6,0,2.4,0S1.9,0.1,1.7,0.3L0.3,1.7C0.1,1.9,0,2.2,0,2.4  s0.1,0.5,0.3,0.7l7.5,7.5c0.2,0.2,0.2,0.5,0,0.7l-7.5,7.5C0.1,19,0,19.3,0,19.5s0.1,0.5,0.3,0.7l1.4,1.4c0.2,0.2,0.5,0.3,0.7,0.3  s0.5-0.1,0.7-0.3l7.5-7.5c0.2-0.2,0.5-0.2,0.7,0l7.5,7.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l1.4-1.4c0.2-0.2,0.3-0.5,0.3-0.7  s-0.1-0.5-0.3-0.7L14.1,11.3z"></path>
        </svg>
          
        <div class="history__container">
          <div class="history__inner">
            <?php
              foreach ($history as $item) {
                include 'php/receipt.php';
              }
            ?>
          </div>
        </div>
      </section>
    </div>
    <script type="text/javascript" src="vendors/jquery.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
  </body>
</html>
